<html style=" display: inline-block; margin: 0px auto; text-align: center;">
	<head>
	 <title>Galactic Polygon (Alpha 0.1)</title>
	</head>

	<body style="overflow:hidden;">
         <canvas id="game" width="256px" height = "256px" style="width: 512px; height: 512px;"> Your Web Navigator do not support Canvas</canvas>
    </body>
    <h3> Controlles: Clavier(Flèches Dirrectionnelle & Barre Espace)</h3>

<fieldset>
    <legend>Engine</legend>
</fieldset>
<fieldset>
    <legend>Menu</legend>
    <button type="button" onclick="SkelzEngine.setRoom(new Menu());">Menu</button>
</fieldset>
<fieldset>
    <legend>Controlleur</legend>
    <div>
        <button type="button" id="mouse-controller" onclick="SkelzEngine.setController(new MouseController())">Mouse</button>
        <button type="button" id="keyboard-controller" onclick="SkelzEngine.setController(new KeyboardController())">Keyboard</button>
        <button type="button" id="touch-controller">Touch</button>
        <button type="button" id="gamepad-controller">Gamepad</button>
        <button type="button" id="null-controller" onclick="SkelzEngine.setController(new NullController())">Aucun</button>
    </div>
</fieldset>

<fieldset>
    <legend>Log panel</legend>
    <div style="background: red; height: 200px; width: 100%; overflow: auto;" id="log-panel">

    </div>
</fieldset>

</html>

<!-- Include the SkelzEngine -->
<script src="SkelzEngine/libs/underscore-min.js"></script>
<script src="game/IA/Event.js"></script>
<script src="game/Controller/KeyboardController.js"></script>
<script src="game/Controller/MouseController.js"></script>
<script src="game/Controller/TouchController.js"></script>
<script src="game/Controller/NullController.js"></script>
<script src="game/Controller/GamepadController.js"></script>
<script src="SkelzEngine/SkelzEngine.js"></script>

<!-- custom engine factory -->
<script src="game/EngineFactory.js"></script>

<!-- modules -->
<script src="SkelzEngine/libs/matter-0.8.0.min.js"></script>
<script src="SkelzEngine/modules/Room.js"></script>
<script src="SkelzEngine/modules/Entity.js"></script>

<script src="https://code.createjs.com/soundjs-0.6.0.min.js"></script>

<script src="game/global/Global.js"></script>
<script src="game/room/Room1.js"></script>
<script src="game/UI/Gui.js"></script>
<script src="game/entity/Player.js"></script>
<script src="game/entity/Projectile.js"></script>
<script src="game/entity/Eclat.js"></script>
<script src="game/UI/Bouton.js"></script>
<script src="game/IA/Environement.js"></script>
<script src="game/IA/EnvironmentFactory.js"></script>
<script src="game/IA/Ia.js"></script>
<script src="game/Logger/WrapperConsoleLog.js"></script>
<script src="game/Logger/Logger.js"></script>
<script src="game/Logger/WebLogger.js"></script>
<script src="game/Logger/MultipleLogger.js"></script>
<script src="game/entity/Monster.js"></script>
<script src="game/util-general/GameHud.js"></script>
<script src="game/util-general/InterfaceValidity.js"></script>
<script src="game/SoundManager/ZeroEngineSoundManagerInterface.js"></script>
<script>

var setMouseController = function()
{
    SkelzEngine.setController(new MouseController())
};

var setKeyboardController = function()
{
    SkelzEngine.setController(new KeyboardController());
};

var setTouchController = function()
{
    SkelzEngine.setController(new TouchController());
};

var setNullController = function()
{
    SkelzEngine.setController(new NullController());
};

var setGamepadController = function()
{
    SkelzEngine.setController(new GamepadController());
};

document.querySelector("#mouse-controller").addEventListener("touchstart", setMouseController);
document.querySelector("#mouse-controller").addEventListener("click", setMouseController);

document.querySelector("#keyboard-controller").addEventListener("touchstart", setKeyboardController);
document.querySelector("#keyboard-controller").addEventListener("click", setKeyboardController);

document.querySelector("#touch-controller") .addEventListener("touchstart", setTouchController);
document.querySelector("#touch-controller").addEventListener("click", setTouchController);

document.querySelector("#null-controller") .addEventListener("touchstart", setNullController);
document.querySelector("#null-controller").addEventListener("click", setNullController);

document.querySelector("#gamepad-controller").addEventListener("touchstart", setGamepadController);
document.querySelector("#gamepad-controller").addEventListener("click", setGamepadController);

//style="width: 96vw; height: 96vh;"
//Code de base pour le SkelzEngine
var canvasContext2d = document.getElementById("game").getContext("2d");

//var ctx = canvasContext2d;
canvasContext2d.imageSmoothingEnabled= false;
canvasContext2d.mozImageSmoothingEnabled = false;

var start = function()
{

    SkelzEngine.init(function(){


        var room = new Room1();

        //SkelzEngine.setController(new KeyboardController());
        SkelzEngine.setController(new NullController());


        SkelzEngine.setRoom(room);

        var logger = new MultipleLogger([
            //  new WebLogger(document.querySelector("#log-panel")),
            new Logger()
        ]);

        // Attention utiliser le wrapper peut provoquer une boucle sans fin si le logger est utiliser
        //WrapperConsoleLog.wrap(logger);

        var ia = new Ia(EnvironmentFactory.factoryFromRoom(room, logger), logger);

        ia.addEnemyInterface(Player);

        window.setInterval(function()
        {
            // ia.setEnvironment(EnvironmentFactory.factoryFromRoom(room, logger));
            // ia.update();
        }, 500);

        //SkelzEngine.setRoom(new Room1());
    }, EngineFactory.factory());
};

    start();


</script>






